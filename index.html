<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>NER - Nova Escola Rock</title>
<style>
    * {margin: 0; padding: 0; box-sizing: border-box;}
    body {font-family: Arial, sans-serif; background: linear-gradient(135deg, #1a1a1a, #2d2d2d); color: #fff; min-height: 100vh;}
    .header {background: linear-gradient(90deg, #ff6b35, #f7931e); padding: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3);}
    .header h1 {font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);}
    .header p {font-size: 1.2em; opacity: 0.9;}
    .container {max-width: 1400px; margin: 0 auto; padding: 20px;}
    .tabs {display: flex; background: #333; border-radius: 10px 10px 0 0; overflow: hidden; margin-bottom: 0;}
    .tab {flex: 1; padding: 15px 20px; background: #444; color: #ccc; cursor: pointer; transition: all 0.3s ease; border: none; font-size: 16px;}
    .tab.active {background: #ff6b35; color: white;}
    .tab:hover:not(.active) {background: #555; color: white;}
    .tab-content {display: none; background: #2a2a2a; border-radius: 0 0 10px 10px; padding: 30px; box-shadow: 0 8px 25px rgba(0,0,0,0.3);}
    .tab-content.active {display: block;}
    .form-grid {display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;}
    .form-group {display: flex; flex-direction: column;}
    .form-group label {margin-bottom: 8px; font-weight: bold; color: #ff6b35;}
    .form-group input, .form-group select {padding: 12px; border: 2px solid #555; border-radius: 8px; background: #1a1a1a; color: white; font-size: 16px; transition: border-color 0.3s ease;}
    .form-group input:focus, .form-group select:focus {outline: none; border-color: #ff6b35;}
    .btn {padding: 12px 25px; background: linear-gradient(45deg, #ff6b35, #f7931e); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: all 0.3s ease; margin: 5px;}
    .btn:hover {transform: translateY(-2px); box-shadow: 0 5px 15px rgba(255, 107, 53, 0.4);}
    .btn-danger {background: linear-gradient(45deg, #dc3545, #c82333);}
    .btn-danger:hover {box-shadow: 0 5px 15px rgba(220, 53, 69, 0.4);}
    .table-container {background: #1a1a1a; border-radius: 10px; overflow: hidden; margin-top: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.3);}
    table {width: 100%; border-collapse: collapse;}
    th {background: #ff6b35; color: white; padding: 15px 10px; text-align: left; font-weight: bold;}
    td {padding: 12px 10px; border-bottom: 1px solid #333; color: #ccc;}
    tr:hover {background: #333;}
    .stats {display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;}
    .stat-card {background: linear-gradient(135deg, #333, #444); padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 8px 25px rgba(0,0,0,0.3); border: 2px solid #ff6b35;}
    .stat-card h3 {color: #ff6b35; font-size: 2.5em; margin-bottom: 10px;}
    .stat-card p {color: #ccc; font-size: 1.1em; margin-bottom: 5px;}
    .search-box {width: 100%; padding: 15px; margin-bottom: 20px; border: 2px solid #555; border-radius: 10px; background: #1a1a1a; color: white; font-size: 16px;}
    .search-box:focus {outline: none; border-color: #ff6b35;}
    .euro {color: #28a745; font-weight: bold;}
    .status-ativo {color: #28a745; font-weight: bold;}
    .status-inativo {color: #dc3545; font-weight: bold;}
    .alert {padding: 15px; margin: 10px 0; border-radius: 8px; font-weight: bold;}
    .alert-success {background: rgba(40, 167, 69, 0.2); border: 1px solid #28a745; color: #28a745;}
    .alert-error {background: rgba(220, 53, 69, 0.2); border: 1px solid #dc3545; color: #dc3545;}
    @media (max-width: 768px) {
        .form-grid {grid-template-columns: 1fr;}
        .tabs {flex-direction: column;}
        .header h1 {font-size: 1.8em;}
    }
</style>
</head>
<body>
<div class="header">
<h1>üé∏ NER - Nova Escola Rock</h1>
<p>Sistema de Gest√£o Completo</p>
</div>
<div class="container">
<div class="tabs">
<button class="tab active" onclick="showTab('dashboard')">Dashboard</button>
<button class="tab" onclick="showTab('alunos')">Alunos</button>
<button class="tab" onclick="showTab('professores')">Professores</button>
<button class="tab" onclick="showTab('aulas')">Aulas</button>
<button class="tab" onclick="showTab('pagamentos')">Pagamentos</button>
<button class="tab" onclick="showTab('relatorios')">Relat√≥rios</button>
</div>
<!-- Dashboard -->
<div class="tab-content active" id="dashboard">
<div class="stats">
<div class="stat-card"><h3 id="totalAlunos">0</h3><p>Total de Alunos</p></div>
<div class="stat-card"><h3 id="totalProfessores">0</h3><p>Professores</p></div>
<div class="stat-card"><h3 id="totalAulas">0</h3><p>Aulas Este M√™s</p></div>
<div class="stat-card"><h3 class="euro" id="receitaMensal">‚Ç¨0</h3><p>Receita Mensal</p></div>
</div>
<div class="table-container">
<h2 style="padding: 20px; color: #ff6b35;">Pr√≥ximas Aulas</h2>
<table>
<thead>
<tr>
<th>Data/Hora</th>
<th>Aluno</th>
<th>Professor</th>
<th>Instrumento</th>
<th>Status</th>
</tr>
</thead>
<tbody id="proximasAulas">
<tr>
<td colspan="5" style="text-align: center; padding: 30px; color: #666;">
Nenhuma aula agendada
</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- Alunos -->
<div class="tab-content" id="alunos">
<h2 style="color: #ff6b35; margin-bottom: 20px;">Gest√£o de Alunos</h2>
<div class="form-grid">
<div class="form-group"><label>Nome Completo</label><input id="nomeAluno" placeholder="Nome do aluno" type="text"/></div>
<div class="form-group"><label>Email</label><input id="emailAluno" placeholder="email@exemplo.com" type="email"/></div>
<div class="form-group"><label>Telefone</label><input id="telefoneAluno" placeholder="+351 xxx xxx xxx" type="tel"/></div>
<div class="form-group"><label>Data de Nascimento</label><input id="nascimentoAluno" type="date"/></div>
<div class="form-group"><label>Instrumento Principal</label>
<select id="instrumentoAluno">
<option value="">Selecione...</option>
<option value="Guitarra">Guitarra El√©trica</option>
<option value="Baixo">Baixo</option>
<option value="Bateria">Bateria</option>
<option value="Teclado">Teclado</option>
<option value="Vocal">Canto</option>
<option value="Viol√£o">Guitarra Cl√°ssica</option>
<option value="Piano">Piano</option>
<option value="Acorde√£o/Concertina">Acorde√£o/Concertina</option>
<option value="Cavaquinho">Cavaquinho</option>
</select>
</div>
<div class="form-group"><label>Mensalidade (‚Ç¨)</label><input id="mensalidadeAluno" min="0" placeholder="50.00" step="0.01" type="number"/></div>
</div>
<div style="text-align: center;">
<button class="btn" onclick="adicionarAluno()">Adicionar Aluno</button>
<button class="btn" onclick="limparFormAluno()">Limpar Formul√°rio</button>
</div>
<input class="search-box" id="searchAlunos" onkeyup="filtrarAlunos()" placeholder="Pesquisar alunos..." type="text"/>
<div class="table-container">
<table>
<thead>
<tr>
<th>Nome</th>
<th>Email</th>
<th>Telefone</th>
<th>Instrumento</th>
<th>Mensalidade</th>
<th>Status</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabelaAlunos"></tbody>
</table>
</div>
</div>
<!-- Professores -->
<div class="tab-content" id="professores">
<h2 style="color: #ff6b35; margin-bottom: 20px;">Gest√£o de Professores</h2>
<div class="form-grid">
<div class="form-group"><label>Nome Completo</label><input id="nomeProfessor" placeholder="Nome do professor" type="text"/></div>
<div class="form-group"><label>Email</label><input id="emailProfessor" placeholder="email@exemplo.com" type="email"/></div>
<div class="form-group"><label>Telefone</label><input id="telefoneProfessor" placeholder="+351 xxx xxx xxx" type="tel"/></div>
<div class="form-group"><label>Especialidade</label>
<select id="especialidadeProfessor">
<option value="">Selecione...</option>
<option value="Guitarra">Guitarra El√©trica</option>
<option value="Baixo">Baixo</option>
<option value="Bateria">Bateria</option>
<option value="Teclado">Teclado</option>
<option value="Vocal">Canto</option>
<option value="Viol√£o">Guitarra Cl√°ssica</option>
<option value="Piano">Piano</option>
<option value="Acorde√£o/Concertina">Acorde√£o/Concertina</option>
<option value="Cavaquinho">Cavaquinho</option>
</select>
</div>
<div class="form-group"><label>Valor por Aula (‚Ç¨)</label><input id="valorAulaProfessor" min="0" placeholder="25.00" step="0.01" type="number"/></div>
</div>
<div style="text-align: center;">
<button class="btn" onclick="adicionarProfessor()">Adicionar Professor</button>
<button class="btn" onclick="limparFormProfessor()">Limpar Formul√°rio</button>
</div>
<input class="search-box" id="searchProfessores" onkeyup="filtrarProfessores()" placeholder="Pesquisar professores..." type="text"/>
<div class="table-container">
<table>
<thead>
<tr>
<th>Nome</th>
<th>Email</th>
<th>Telefone</th>
<th>Especialidade</th>
<th>Valor/Aula</th>
<th>Status</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabelaProfessores"></tbody>
</table>
</div>
</div>
<!-- Aulas -->
<div class="tab-content" id="aulas">
<h2 style="color: #ff6b35; margin-bottom: 20px;">Agendamento de Aulas</h2>
<div class="form-grid">
<div class="form-group"><label>Aluno</label><select id="alunoAula"><option value="">Selecione um aluno...</option></select></div>
<div class="form-group"><label>Professor</label><select id="professorAula"><option value="">Selecione um professor...</option></select></div>
<div class="form-group"><label>Data</label><input id="dataAula" type="date"/></div>
<div class="form-group"><label>Hor√°rio</label><input id="horarioAula" type="time"/></div>
<div class="form-group"><label>Dura√ß√£o (minutos)</label>
<select id="duracaoAula">
<option value="30">30 minutos</option>
<option value="45">45 minutos</option>
<option selected="" value="60">60 minutos</option>
<option value="90">90 minutos</option>
</select>
</div>
<div class="form-group"><label>Valor da Aula (‚Ç¨)</label><input id="valorAula" min="0" placeholder="25.00" step="0.01" type="number"/></div>
</div>
<div style="text-align: center;">
<button class="btn" onclick="agendarAula()">Agendar Aula</button>
<button class="btn" onclick="limparFormAula()">Limpar Formul√°rio</button>
</div>
<input class="search-box" id="searchAulas" onkeyup="filtrarAulas()" placeholder="Pesquisar aulas..." type="text"/>
<div class="table-container">
<table>
<thead>
<tr>
<th>Data/Hora</th>
<th>Aluno</th>
<th>Professor</th>
<th>Dura√ß√£o</th>
<th>Valor</th>
<th>Status</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabelaAulas"></tbody>
</table>
</div>
</div>
<!-- Pagamentos -->
<div class="tab-content" id="pagamentos">
<h2 style="color: #ff6b35; margin-bottom: 20px;">Controle de Pagamentos</h2>
<div class="form-grid">
<div class="form-group"><label>Aluno</label><select id="alunoPagamento"><option value="">Selecione um aluno...</option></select></div>
<div class="form-group"><label>Valor (‚Ç¨)</label><input id="valorPagamento" min="0" placeholder="50.00" step="0.01" type="number"/></div>
<div class="form-group"><label>Data do Pagamento</label><input id="dataPagamento" type="date"/></div>
<div class="form-group"><label>M√™s de Refer√™ncia</label><input id="mesReferencia" type="month"/></div>
<div class="form-group"><label>M√©todo de Pagamento</label>
<select id="metodoPagamento">
<option value="Dinheiro">Dinheiro</option>
<option value="Transfer√™ncia">Transfer√™ncia</option>
<option value="MB Way">MB Way</option>
<option value="Cart√£o">Cart√£o</option>
</select>
</div>
</div>
<div style="text-align: center;">
<button class="btn" onclick="registrarPagamento()">Registrar Pagamento</button>
<button class="btn" onclick="limparFormPagamento()">Limpar Formul√°rio</button>
</div>
<input class="search-box" id="searchPagamentos" onkeyup="filtrarPagamentos()" placeholder="Pesquisar pagamentos..." type="text"/>
<div class="table-container">
<table>
<thead>
<tr>
<th>Data</th>
<th>Aluno</th>
<th>Valor</th>
<th>M√™s Ref.</th>
<th>M√©todo</th>
<th>A√ß√µes</th>
</tr>
</thead>
<tbody id="tabelaPagamentos"></tbody>
</table>
</div>
<!-- Pagamento a Professores -->
<h3 style="color: #f7931e; margin: 30px 0 10px 0;">Pagamento a Professores</h3>
<div class="form-grid">
    <div class="form-group">
        <label>Professor</label>
        <select id="professorPagamento"><option value="">Selecione um professor...</option></select>
    </div>
    <div class="form-group">
        <label>Valor (‚Ç¨)</label>
        <input id="valorPagamentoProfessor" min="0" placeholder="50.00" step="0.01" type="number"/>
    </div>
    <div class="form-group">
        <label>Data do Pagamento</label>
        <input id="dataPagamentoProfessor" type="date"/>
    </div>
    <div class="form-group">
        <label>Refer√™ncia (Aula/M√™s)</label>
        <input id="referenciaPagamentoProfessor" placeholder="Ex: Aula 10/06 ou Junho 2025" type="text"/>
    </div>
    <div class="form-group">
        <label>M√©todo de Pagamento</label>
        <select id="metodoPagamentoProfessor">
            <option value="Dinheiro">Dinheiro</option>
            <option value="Transfer√™ncia">Transfer√™ncia</option>
            <option value="MB Way">MB Way</option>
            <option value="Cart√£o">Cart√£o</option>
        </select>
    </div>
</div>
<div style="text-align: center;">
    <button class="btn" onclick="registrarPagamentoProfessor()">Registrar Pagamento Professor</button>
    <button class="btn" onclick="limparFormPagamentoProfessor()">Limpar Formul√°rio</button>
</div>
<div class="table-container">
    <h4 style="color: #f7931e; padding: 20px 0 10px 0;">Pagamentos a Professores</h4>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Professor</th>
                <th>Valor</th>
                <th>Refer√™ncia</th>
                <th>M√©todo</th>
                <th>A√ß√µes</th>
            </tr>
        </thead>
        <tbody id="tabelaPagamentosProfessores"></tbody>
    </table>
</div>
</div>
<!-- Relat√≥rios -->
<div class="tab-content" id="relatorios">
<h2 style="color: #ff6b35; margin-bottom: 20px;">Relat√≥rios e Estat√≠sticas</h2>
<div class="stats">
<div class="stat-card"><h3 class="euro" id="receitaTotal">‚Ç¨0</h3><p>Receita Total</p></div>
<div class="stat-card"><h3 id="aulasRealizadas">0</h3><p>Aulas Realizadas</p></div>
<div class="stat-card"><h3 id="alunosAtivos">0</h3><p>Alunos Ativos</p></div>
<div class="stat-card"><h3 class="euro" id="mediaMensal">‚Ç¨0</h3><p>M√©dia Mensal</p></div>
</div>
<div style="text-align: center; margin-bottom: 30px;">
<button class="btn" onclick="gerarRelatorioMensal()">Relat√≥rio Mensal</button>
<button class="btn" onclick="exportarDados()">Exportar Dados</button>
</div>
</div>
</div>
<!-- SCRIPTS -->
<script>
// --------- Utilit√°rios de LocalStorage ---------
function getDados(chave) {
    return JSON.parse(localStorage.getItem(chave) || '[]');
}
function setDados(chave, dados) {
    localStorage.setItem(chave, JSON.stringify(dados));
}

// --------- Fun√ß√£o para Tabs ---------
function showTab(tabId) {
    document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelector('.tab[onclick="showTab(\''+tabId+'\')"]').classList.add('active');
}

// --------- ALUNOS ---------
function atualizarTabelaAlunos() {
    const alunos = getDados('alunos');
    const tabela = document.getElementById('tabelaAlunos');
    tabela.innerHTML = '';
    alunos.forEach((aluno, i) => {
        tabela.innerHTML += `
        <tr>
            <td>${aluno.nome}</td>
            <td>${aluno.email}</td>
            <td>${aluno.telefone}</td>
            <td>${aluno.instrumento}</td>
            <td>‚Ç¨${aluno.mensalidade || 0}</td>
            <td class="${aluno.ativo !== false ? 'status-ativo' : 'status-inativo'}">${aluno.ativo !== false ? 'Ativo' : 'Inativo'}</td>
            <td>
                <button class="btn btn-danger" onclick="removerAluno(${i})">Remover</button>
            </td>
        </tr>`;
    });
    document.getElementById('totalAlunos').textContent = alunos.length;
    atualizarSelectAlunos();
}
function adicionarAluno() {
    const nome = document.getElementById('nomeAluno').value.trim();
    const email = document.getElementById('emailAluno').value.trim();
    const telefone = document.getElementById('telefoneAluno').value.trim();
    const nascimento = document.getElementById('nascimentoAluno').value;
    const instrumento = document.getElementById('instrumentoAluno').value;
    const mensalidade = parseFloat(document.getElementById('mensalidadeAluno').value) || 0;
    if (!nome || !email) return alert('Preenche todos os campos obrigat√≥rios!');
    const alunos = getDados('alunos');
    alunos.push({ nome, email, telefone, nascimento, instrumento, mensalidade, ativo: true });
    setDados('alunos', alunos);
    atualizarTabelaAlunos();
    limparFormAluno();
}
function removerAluno(idx) {
    const alunos = getDados('alunos');
    alunos.splice(idx, 1);
    setDados('alunos', alunos);
    atualizarTabelaAlunos();
}
function limparFormAluno() {
    document.getElementById('nomeAluno').value = '';
    document.getElementById('emailAluno').value = '';
    document.getElementById('telefoneAluno').value = '';
    document.getElementById('nascimentoAluno').value = '';
    document.getElementById('instrumentoAluno').value = '';
    document.getElementById('mensalidadeAluno').value = '';
}
function atualizarSelectAlunos() {
    const alunos = getDados('alunos');
    const selects = [document.getElementById('alunoAula'), document.getElementById('alunoPagamento')];
    selects.forEach(sel => {
        sel.innerHTML = '<option value="">Selecione um aluno...</option>';
        alunos.forEach((a, i) => {
            sel.innerHTML += `<option value="${i}">${a.nome}</option>`;
        });
    });
}

// --------- PROFESSORES ---------
function atualizarTabelaProfessores() {
    const professores = getDados('professores');
    const tabela = document.getElementById('tabelaProfessores');
    tabela.innerHTML = '';
    professores.forEach((prof, i) => {
        tabela.innerHTML += `
        <tr>
            <td>${prof.nome}</td>
            <td>${prof.email}</td>
            <td>${prof.telefone}</td>
            <td>${prof.especialidade}</td>
            <td>‚Ç¨${prof.valorAula || 0}</td>
            <td class="${prof.ativo !== false ? 'status-ativo' : 'status-inativo'}">${prof.ativo !== false ? 'Ativo' : 'Inativo'}</td>
            <td>
                <button class="btn btn-danger" onclick="removerProfessor(${i})">Remover</button>
            </td>
        </tr>`;
    });
    document.getElementById('totalProfessores').textContent = professores.length;
    atualizarSelectProfessores();
}
function adicionarProfessor() {
    const nome = document.getElementById('nomeProfessor').value.trim();
    const email = document.getElementById('emailProfessor').value.trim();
    const telefone = document.getElementById('telefoneProfessor').value.trim();
    const especialidade = document.getElementById('especialidadeProfessor').value;
    const valorAula = parseFloat(document.getElementById('valorAulaProfessor').value) || 0;
    if (!nome || !email) return alert('Preenche todos os campos obrigat√≥rios!');
    const professores = getDados('professores');
    professores.push({ nome, email, telefone, especialidade, valorAula, ativo: true });
    setDados('professores', professores);
    atualizarTabelaProfessores();
    limparFormProfessor();
}
function removerProfessor(idx) {
    const professores = getDados('professores');
    professores.splice(idx, 1);
    setDados('professores', professores);
    atualizarTabelaProfessores();
}
function limparFormProfessor() {
    document.getElementById('nomeProfessor').value = '';
    document.getElementById('emailProfessor').value = '';
    document.getElementById('telefoneProfessor').value = '';
    document.getElementById('especialidadeProfessor').value = '';
    document.getElementById('valorAulaProfessor').value = '';
}
function atualizarSelectProfessores() {
    const professores = getDados('professores');
    const selects = [document.getElementById('professorAula'), document.getElementById('professorPagamento')];
    selects.forEach(sel => {
        sel.innerHTML = '<option value="">Selecione um professor...</option>';
        professores.forEach((p, i) => {
            sel.innerHTML += `<option value="${i}">${p.nome}</option>`;
        });
    });
}

// --------- AULAS ---------
function atualizarTabelaAulas() {
    const aulas = getDados('aulas');
    const alunos = getDados('alunos');
    const professores = getDados('professores');
    const tabela = document.getElementById('tabelaAulas');
    tabela.innerHTML = '';
    aulas.forEach((aula, i) => {
        const aluno = alunos[aula.aluno];
        const professor = professores[aula.professor];
        tabela.innerHTML += `
        <tr>
            <td>${aula.data} ${aula.hora}</td>
            <td>${aluno ? aluno.nome : ''}</td>
            <td>${professor ? professor.nome : ''}</td>
            <td>${aula.duracao} min</td>
            <td>‚Ç¨${aula.valor || 0}</td>
            <td class="status-ativo">Agendada</td>
            <td>
                <button class="btn btn-danger" onclick="removerAula(${i})">Remover</button>
            </td>
        </tr>`;
    });
    document.getElementById('totalAulas').textContent = aulas.length;
    atualizarProximasAulas();
}
function agendarAula() {
    const aluno = document.getElementById('alunoAula').value;
    const professor = document.getElementById('professorAula').value;
    const data = document.getElementById('dataAula').value;
    const hora = document.getElementById('horarioAula').value;
    const duracao = document.getElementById('duracaoAula').value;
    const valor = parseFloat(document.getElementById('valorAula').value) || 0;
    if (!aluno || !professor || !data || !hora) return alert('Preenche todos os campos obrigat√≥rios!');
    const aulas = getDados('aulas');
    aulas.push({ aluno, professor, data, hora, duracao, valor });
    setDados('aulas', aulas);
    atualizarTabelaAulas();
    limparFormAula();
}
function removerAula(idx) {
    const aulas = getDados('aulas');
    aulas.splice(idx, 1);
    setDados('aulas', aulas);
    atualizarTabelaAulas();
}
function limparFormAula() {
    document.getElementById('alunoAula').value = '';
    document.getElementById('professorAula').value = '';
    document.getElementById('dataAula').value = '';
    document.getElementById('horarioAula').value = '';
    document.getElementById('duracaoAula').value = '60';
    document.getElementById('valorAula').value = '';
}

// --------- PAGAMENTOS ---------
function atualizarTabelaPagamentos() {
    const pagamentos = getDados('pagamentos');
    const alunos = getDados('alunos');
    const tabela = document.getElementById('tabelaPagamentos');
    tabela.innerHTML = '';
    pagamentos.forEach((pag, i) => {
        const aluno = alunos[pag.aluno];
        tabela.innerHTML += `
        <tr>
            <td>${pag.data}</td>
            <td>${aluno ? aluno.nome : ''}</td>
            <td>‚Ç¨${pag.valor || 0}</td>
            <td>${pag.mesReferencia || ''}</td>
            <td>${pag.metodo || ''}</td>
            <td>
                <button class="btn btn-danger" onclick="removerPagamento(${i})">Remover</button>
            </td>
        </tr>`;
    });
}
function registrarPagamento() {
    const aluno = document.getElementById('alunoPagamento').value;
    const valor = parseFloat(document.getElementById('valorPagamento').value) || 0;
    const data = document.getElementById('dataPagamento').value;
    const mesReferencia = document.getElementById('mesReferencia').value;
    const metodo = document.getElementById('metodoPagamento').value;
    if (!aluno || !valor || !data) return alert('Preenche todos os campos obrigat√≥rios!');
    const pagamentos = getDados('pagamentos');
    pagamentos.push({ aluno, valor, data, mesReferencia, metodo });
    setDados('pagamentos', pagamentos);
    atualizarTabelaPagamentos();
    limparFormPagamento();
}
function removerPagamento(idx) {
    const pagamentos = getDados('pagamentos');
    pagamentos.splice(idx, 1);
    setDados('pagamentos', pagamentos);
    atualizarTabelaPagamentos();
}
function limparFormPagamento() {
    document.getElementById('alunoPagamento').value = '';
    document.getElementById('valorPagamento').value = '';
    document.getElementById('dataPagamento').value = '';
    document.getElementById('mesReferencia').value = '';
    document.getElementById('metodoPagamento').value = 'Dinheiro';
}

// --------- PAGAMENTO A PROFESSORES ---------
function atualizarTabelaPagamentosProfessores() {
    const pagamentos = getDados('pagamentosProfessores');
    const professores = getDados('professores');
    const tabela = document.getElementById('tabelaPagamentosProfessores');
    tabela.innerHTML = '';
    pagamentos.forEach((pag, i) => {
        const professor = professores[pag.professor];
        tabela.innerHTML += `
        <tr>
            <td>${pag.data}</td>
            <td>${professor ? professor.nome : ''}</td>
            <td>‚Ç¨${pag.valor || 0}</td>
            <td>${pag.referencia || ''}</td>
            <td>${pag.metodo || ''}</td>
            <td>
                <button class="btn btn-danger" onclick="removerPagamentoProfessor(${i})">Remover</button>
            </td>
        </tr>`;
    });
}
function registrarPagamentoProfessor() {
    const professor = document.getElementById('professorPagamento').value;
    const valor = parseFloat(document.getElementById('valorPagamentoProfessor').value) || 0;
    const data = document.getElementById('dataPagamentoProfessor').value;
    const referencia = document.getElementById('referenciaPagamentoProfessor').value;
    const metodo = document.getElementById('metodoPagamentoProfessor').value;
    if (!professor || !valor || !data) return alert('Preenche todos os campos obrigat√≥rios!');
    const pagamentos = getDados('pagamentosProfessores');
    pagamentos.push({ professor, valor, data, referencia, metodo });
    setDados('pagamentosProfessores', pagamentos);
    atualizarTabelaPagamentosProfessores();
    limparFormPagamentoProfessor();
}
function removerPagamentoProfessor(idx) {
    const pagamentos = getDados('pagamentosProfessores');
    pagamentos.splice(idx, 1);
    setDados('pagamentosProfessores', pagamentos);
    atualizarTabelaPagamentosProfessores();
}
function limparFormPagamentoProfessor() {
    document.getElementById('professorPagamento').value = '';
    document.getElementById('valorPagamentoProfessor').value = '';
    document.getElementById('dataPagamentoProfessor').value = '';
    document.getElementById('referenciaPagamentoProfessor').value = '';
    document.getElementById('metodoPagamentoProfessor').value = 'Dinheiro';
}

// --------- DASHBOARD E RELAT√ìRIOS ---------
function atualizarProximasAulas() {
    const aulas = getDados('aulas');
    const alunos = getDados('alunos');
    const professores = getDados('professores');
    const tbody = document.getElementById('proximasAulas');
    tbody.innerHTML = '';
    let futuras = aulas.filter(a => {
        const dataAula = new Date(a.data + 'T' + a.hora);
        return dataAula >= new Date();
    });
    futuras = futuras.sort((a, b) => new Date(a.data + 'T' + a.hora) - new Date(b.data + 'T' + b.hora));
    if (futuras.length === 0) {
        tbody.innerHTML = `<tr><td colspan="5" style="text-align: center; padding: 30px; color: #666;">Nenhuma aula agendada</td></tr>`;
        return;
    }
    futuras.slice(0, 10).forEach(aula => {
        const aluno = alunos[aula.aluno];
        const professor = professores[aula.professor];
        tbody.innerHTML += `
        <tr>
            <td>${aula.data} ${aula.hora}</td>
            <td>${aluno ? aluno.nome : ''}</td>
            <td>${professor ? professor.nome : ''}</td>
            <td>${aluno ? aluno.instrumento : ''}</td>
            <td class="status-ativo">Agendada</td>
        </tr>`;
    });
}

function atualizarDashboard() {
    const alunos = getDados('alunos');
    const professores = getDados('professores');
    const aulas = getDados('aulas');
    const pagamentos = getDados('pagamentos');
    document.getElementById('totalAlunos').textContent = alunos.length;
    document.getElementById('totalProfessores').textContent = professores.length;
    // Aulas do m√™s atual
    const mesAtual = (new Date()).toISOString().slice(0, 7);
    const aulasMes = aulas.filter(a => a.data && a.data.startsWith(mesAtual));
    document.getElementById('totalAulas').textContent = aulasMes.length;
    // Receita mensal
    const receitaMes = pagamentos.filter(p => p.mesReferencia && p.mesReferencia.startsWith(mesAtual))
        .reduce((acc, p) => acc + (parseFloat(p.valor) || 0), 0);
    document.getElementById('receitaMensal').textContent = '‚Ç¨' + receitaMes;
}

function atualizarRelatorios() {
    const pagamentos = getDados('pagamentos');
    const aulas = getDados('aulas');
    const alunos = getDados('alunos');
    // Receita total
    const receitaTotal = pagamentos.reduce((acc, p) => acc + (parseFloat(p.valor) || 0), 0);
    document.getElementById('receitaTotal').textContent = '‚Ç¨' + receitaTotal;
    // Aulas realizadas
    document.getElementById('aulasRealizadas').textContent = aulas.length;
    // Alunos ativos
    document.getElementById('alunosAtivos').textContent = alunos.filter(a => a.ativo !== false).length;
    // M√©dia mensal
    const meses = [...new Set(pagamentos.map(p => p.mesReferencia).filter(Boolean))];
    document.getElementById('mediaMensal').textContent = '‚Ç¨' + (meses.length ? Math.round(receitaTotal/meses.length) : 0);
}

// --------- FILTROS (EXEMPLO PARA ALUNOS, REPLICA PARA OUTROS) ---------
function filtrarAlunos() {
    const termo = document.getElementById('searchAlunos').value.toLowerCase();
    const alunos = getDados('alunos');
    const tabela = document.getElementById('tabelaAlunos');
    tabela.innerHTML = '';
    alunos.forEach((aluno, i) => {
        if (
            aluno.nome.toLowerCase().includes(termo) ||
            aluno.email.toLowerCase().includes(termo) ||
            aluno.instrumento.toLowerCase().includes(termo)
        ) {
            tabela.innerHTML += `
            <tr>
                <td>${aluno.nome}</td>
                <td>${aluno.email}</td>
                <td>${aluno.telefone}</td>
                <td>${aluno.instrumento}</td>
                <td>‚Ç¨${aluno.mensalidade || 0}</td>
                <td class="${aluno.ativo !== false ? 'status-ativo' : 'status-inativo'}">${aluno.ativo !== false ? 'Ativo' : 'Inativo'}</td>
                <td>
                    <button class="btn btn-danger" onclick="removerAluno(${i})">Remover</button>
                </td>
            </tr>`;
        }
    });
}
// Replica l√≥gica de filtro para professores, aulas, pagamentos...

// --------- INICIALIZA√á√ÉO ---------
function inicializar() {
    atualizarTabelaAlunos();
    atualizarTabelaProfessores();
    atualizarTabelaAulas();
    atualizarTabelaPagamentos();
    atualizarTabelaPagamentosProfessores();
    atualizarDashboard();
    atualizarRelatorios();
}
window.onload = inicializar;
</script>
</body>
</html>
